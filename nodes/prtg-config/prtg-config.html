<script type="text/javascript">
  RED.nodes.registerType('prtg-config', {
    category: 'config',
    defaults: {
      host: {
        value: "localhost",
        required: true
      },
      port: {
        value: 5050,
        required: true,
        validate: RED.validators.number()
      },
      usetls: {
          value: false
      },
      ignoreUnsafeEndpoints:{
        value: true
      },
      followredirect: {
        value: true
      }
    },
    label: function () {
      return this.host + ":" + this.port;
    },
    oneditprepare: function() {
      this.usetls=this.checked
      $('#node-config-input-usetls').change(function(){$('#node-config-input-port').val(this.checked?5051:5050)})      
    }
  });
</script>

<script type="text/x-red" data-template-name="prtg-config">
  <div class="form-row node-input-host">
      <label for="node-config-input-host"><i class="fa fa-globe"></i> <span>Server</span></label>
      <input class="input-append-left input-error" type="text" id="node-config-input-host" style="width:40%;" dir="" placeholder="e.g. localhost">
      <label for="node-config-input-port" style="margin-left:20px; width:43px; "> <span>Port</span></label>
      <input type="text" id="node-config-input-port" style="width:55px" dir="" placeholder="Port">
  </div>
  <div class="form-row">
      <input type="checkbox" id="node-config-input-usetls" style="display: inline-block; width: auto; vertical-align: top;">
      <label for="node-config-input-usetls" style="width: auto">Enable secure (SSL/TLS) connection</label>
    </div>
    <div class="form-row">
      <input type="checkbox" id="node-config-input-ignoreUnsafeEndpoints" style="display: inline-block; width: auto; vertical-align: top;">
      <label for="node-config-input-ignoreUnsafeEndpoints" style="width: auto">ignore endpoints with unsafe certificates</label>
    </div>
    <div class="form-row">
      <input type="checkbox" id="node-config-input-followredirect" style="display: inline-block; width: auto; vertical-align: top;">
      <label for="node-config-input-followredirect" style="width: auto">Follow redirects</label>
  </div>
</script>
